import{p as b}from"./paginationComponent-p22R5iM1.js";import{_ as x,r as u,o as s,c as o,b as t,d as h,w as A,F as w,I as C,f as y,t as r}from"./index-tpYJsdZS.js";var k={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"annchou",BASE_URL:"/vue_week6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:_,VITE_PATH:p}=k,v={data(){return{currentArticles:[],pagination:{},tempCoupon:{},isNew:!1}},methods:{getCurrentArticles(i=1){const a=`${_}/api/${p}/admin/articles?page=${i}`;this.axios.get(a).then(l=>{const{articles:c,pagination:e}=l.data;this.currentArticles=c,this.pagination=e,console.log(this.currentArticles)}).catch(l=>{this.$swal.fire({icon:"error",text:l.response.data.message})})},showArticlePage(i){this.$router.push(`/admin/articleinfo/${i}`)},deleteArticle(i){const a=`${_}/api/${p}/admin/article/${i}`;this.$swal.fire({title:"確定要刪除文章嗎？",text:"這個動作無法復原",icon:"question",showCancelButton:!0,confirmButtonColor:"#787878",cancelButtonColor:"#333333",cancelButtonText:"取消",confirmButtonText:"確認刪除"}).then(l=>{if(l.isConfirmed){const c=this.$loading.show();this.axios.delete(a).then(e=>{this.$swal.fire({title:e.data.message,confirmButtonColor:"#333333",confirmButtonText:"確認"}),this.getCurrentArticles()}).catch(e=>{this.$swal.fire({icon:"error",text:e.response.data.message})}).finally(()=>{c.hide()})}})}},components:{paginationComponent:b},mounted(){this.getCurrentArticles()}},$={class:"overflow-y-scroll scrollbar-y-hide vh-100"},B={class:"d-flex justify-content-between py-4 py-md-5"},T=t("h2",{class:"fw-bold"},"文章管理",-1),E={key:0,class:"py-5 text-center"},P={key:1,class:"table align-middle"},V=t("thead",null,[t("tr",null,[t("th",null,"標題"),t("th",null,"分類"),t("th",null,"狀態"),t("th",{class:"d-none d-lg-table-cell"},"作者"),t("th",{class:"d-none d-md-table-cell"},"撰寫日期"),t("th")])],-1),I={class:"py-1 rounded-pill bg-light text-center text-nowrap"},D={key:0,class:"text-danger text-nowrap"},L={key:1},S={class:"d-none d-lg-table-cell"},N={class:"d-none d-md-table-cell"},R={class:"btn-group align-items-center"},F=["onClick"],G=t("i",{class:"bi bi-pencil text-default"},null,-1),H=[G],O=["onClick"],j=t("i",{class:"bi bi-trash text-danger"},null,-1),q=[j];function M(i,a,l,c,e,d){const m=u("router-link"),g=u("paginationComponent");return s(),o("div",$,[t("div",B,[T,h(m,{to:"/admin/articleinfo/new",class:"btn btn-dark"},{default:A(()=>[y("建立文章")]),_:1})]),t("div",null,[e.currentArticles.length?(s(),o("table",P,[V,t("tbody",null,[(s(!0),o(w,null,C(e.currentArticles,n=>(s(),o("tr",{key:n.id},[t("td",null,r(n.title),1),t("td",null,[t("p",I,r(n.category),1)]),t("td",null,[n.isPublic?(s(),o("span",D,"發佈中")):(s(),o("span",L,"未發佈"))]),t("td",S,r(n.author),1),t("td",N,r(new Date(n.create_at*1e3).toLocaleString().split(" ")[0]),1),t("td",null,[t("div",R,[t("button",{type:"button",class:"btn border-0",onClick:f=>d.showArticlePage(n.id)},H,8,F),t("button",{type:"button",class:"btn border-0",onClick:f=>d.deleteArticle(n.id)},q,8,O)])])]))),128))])])):(s(),o("p",E,"目前沒有文章")),h(g,{pagination:e.pagination,onGetList:d.getCurrentArticles},null,8,["pagination","onGetList"])])])}const J=x(v,[["render",M]]);export{J as default};
